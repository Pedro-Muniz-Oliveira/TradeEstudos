<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório Financeiro - 20 Anos</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Incluindo CSS direto no arquivo HTML */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            text-align: center;
        }
        .content-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .text-container, .chart-container, .results-container {
            margin-bottom: 20px;
        }
        textarea {
            width: 100%;
            height: 100px;
            margin-top: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Relatório Financeiro - 20 Anos</h1>

        <div class="content-container">
            <div class="text-container">
                <h2>Notas de Estudo</h2>
                <ul>
                    <li><a href="https://docs.google.com/document/d/1njL6_nZ1oOVMskCymSZnqoMv5Vkt_Kntdis2XZUPFMs/edit?usp=sharing" target="_blank">1.1 Princípios - Iniciação</a></li>
                    <li><a href="https://docs.google.com/document/d/18tEM_YWeAtgWgjQ6m_C8WlPUKTA3cYj7O63su6wzeBU/edit?usp=sharing" target="_blank">1.2 Terminologias</a></li>
                    <li><a href="https://docs.google.com/document/d/1xO01lCpCQ3QixLPkCa8_ZImWFpGcVFkIH6wQb1EVRBI/edit?usp=sharing" target="_blank">1.3 Gatilhos</a></li>
                    <li><a href="https://docs.google.com/document/d/1P7W-2ZOcXMAb6vN8SWLeaq5TNL4RrfwLUcoM5AOlgng/edit?usp=sharing" target="_blank">1.4 Gatilho e tempos gráficos (Time Frames)</a></li>
                    <ul>
                        <li>1.4.1 Determinar direção em tempo gráficos maiores</li>
                        <li>1.4.2 Determinar ponto de entrada em tempos gráficos menores</li>
                        <li>1.4.3 Determinar ponto de parciais, pontos de adição de contratos</li>
                        <li>1.4.4 Determinar alvos e reversões</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1SRTHUbIoWMW0LcmCpIkXa-h9vM85R-lmq_TLPAI5Fmo/edit?usp=sharing" target="_blank">1.5 Consolidado e range</a></li>
                    <ul>
                        <li>1.5.1 Detecção de uma consolidação</li>
                        <li>1.5.2 Rompimento</li>
                        <li>1.5.3 80% dos sinais de rompimento em consolidação falham</li>
                        <li>1.5.4 Para o mini índice, uma boa probabilidade de rompimento ocorre após 25% do rompimento</li>
                        <li>1.5.5 Compra na mínima e vende na alta</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1qUh_K7CeCsTQTkZ_qwaFkNRYzuBwsSyn635qrXrg94s/edit?usp=sharing" target="_blank">1.6 Fibo</a></li>
                    <ul>
                        <li>1.6.1 Teoria de Dow</li>
                        <li>1.6.2 MM50 (máxima, mínima e 50%)</li>
                        <li>1.6.3 Retrações (50%, 38.2 ou 61.8, 25%)</li>
                        <li>1.6.4 Projeções (25, 50, 100, 123.6, 125, 150, 161.8, 200)</li>
                        <li>1.6.5 Razões áureas (38.2, 61.8, 123.6, 161.8, 261.8, ...)</li>
                        <li>1.6.6 Principais suportes e resistências: marcações, números redondos, alvos de fibo, último topo, último fundo</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1oBYD8cLDal5izKcmV6h-KTvcKISicZmsMfT6AtkYGhk/edit?usp=sharing" target="_blank">1.7 Ciclo de mercado</a></li>
                    <ul>
                        <li>1.7.1 Climax - spike - pullback - retração - channel - canal - consolidação - range</li>
                        <li>1.7.2 Reversão</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1cEoLkjjj1tfh1seM_-m1g6unXh-Qk5uhwJhub7M-6tk/edit?usp=sharing" target="_blank">1.8 Ondas de Elliott</a></li>
                    <ul>
                        <li>1.8.1 Fase motora</li>
                        <li>1.8.2 Retração</li>
                        <li>1.8.3 Ondas complexas</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1jtZzAArPCgmi6MjuKLomaDzcOu3szQk1X4XckYiLWTo/edit?usp=sharing" target="_blank">1.9 Price Action</a></li>
                    <ul>
                        <li>1.9.1 Topo duplo</li>
                        <li>1.9.2 Fundo duplo</li>
                        <li>1.9.3 Cunhas</li>
                        <li>1.9.4 Operando no início do dia</li>
                        <li>1.9.5 Operando no fim do dia</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1tnGMa6QX8-4OdQ2FUkVd4-2CDtBUp9b0f3Ya1yu8WDU/edit?usp=sharing" target="_blank">1.10 Probabilidades</a></li>
                    <ul>
                        <li>1.10.1 80% do tempo o mercado está em consolidação</li>
                        <li>1.10.2 80% dos sinais de reversão falham em tendência</li>
                        <li>1.10.3 80% dos rompimentos falham em consolidação</li>
                        <li>1.10.4 4 reversões nos dias</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1oVN0CaLgdALkXMAq0X5D5jkwaykmfi9wJqN4kfK5VCE/edit?usp=sharing" target="_blank">1.11 Médias</a></li>
                    <ul>
                        <li>1.11.1 SMA20 e SMA200</li>
                        <li>1.11.2 Tendência</li>
                        <li>1.11.3 Ciclos</li>
                        <li>1.11.4 TBTL</li>
                    </ul>
                    <li><a href="https://docs.google.com/document/d/1MFY6vObMRFQiJqnhJp7e4n9yhHeG3b6XNyfEPQ_u7RM/edit?usp=sharing" target="_blank">1.12 Juntando Tudo</a></li>
                </ul>
            </div>
            
            

            <div class="chart-container">
                <h2>Gráfico Geral</h2>
                <canvas id="graficoGeral"></canvas>
            </div>

            <div class="chart-container">
                <h2>Gráfico Day Trade</h2>
                <canvas id="graficoDayTrade"></canvas>
            </div>

            <div class="chart-container">
                <h2>Gráfico Carteira de Investimentos</h2>
                <canvas id="graficoInvestimentos"></canvas>
            </div>

            <div class="results-container">
                <h2>Resultados Mensais</h2>
                <table id="tabelaResultados" class="spreadsheet">
                    <thead>
                        <tr>
                            <th>Ano</th>
                            <th>Mês</th>
                            <th>Contratos Operados</th>
                            <th>Ganhos Day Trade</th>
                            <th>Gastos</th>
                            <th>Lucro Líquido</th>
                            <th>Saldo Carteira</th>
                            <th>Reinvestimento Dividendos</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>                
            </div>
        </div>
    </div>

    <script>
        function formatarEmReais(valor) {
            return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        let contratos = 3;
        let pontosPorContrato = 100;
        let multiplicador = 0.20;
        let aumentoContratos = 10;
        let saldoCarteira = 0;
        let anoAtual = 2024;
        let mesAtual = 0;

        let anos = [];
        let ganhosDayTrade = [];
        let despesas = [];
        let saldoCarteiraTotal = [];
        let reinvestimentoDividendos = [];

        let taxaDividendos = 0.01; // 1% ao mês

        for (let mes = 0; mes < 20 * 12; mes++) {
            if (mes % 3 === 0 && mes !== 0) {
                contratos += aumentoContratos;
                if (contratos > 500) contratos = 500;
            }

            let pontosTotais = contratos * pontosPorContrato;
            let resultadoMes = pontosTotais * multiplicador * 20;

            let ganhosMensaisDayTrade = resultadoMes;
            ganhosDayTrade.push(ganhosMensaisDayTrade);

            let gastosMensais = ganhosMensaisDayTrade * 0.60;
            despesas.push(gastosMensais);

            let lucro = ganhosMensaisDayTrade * 0.40;
            saldoCarteira += lucro;

            let dividendos = saldoCarteira * taxaDividendos;
            saldoCarteira += dividendos;
            reinvestimentoDividendos.push(dividendos);
            saldoCarteiraTotal.push(saldoCarteira);

            let novaLinha = tabelaResultados.insertRow();
            novaLinha.insertCell(0).innerText = anoAtual;
            novaLinha.insertCell(1).innerText = mesAtual + 1;
            novaLinha.insertCell(2).innerText = contratos;
            novaLinha.insertCell(3).innerText = formatarEmReais(ganhosMensaisDayTrade);
            novaLinha.insertCell(4).innerText = formatarEmReais(gastosMensais);
            novaLinha.insertCell(5).innerText = formatarEmReais(lucro);
            novaLinha.insertCell(6).innerText = formatarEmReais(saldoCarteira);
            novaLinha.insertCell(7).innerText = formatarEmReais(dividendos);

            mesAtual++;
            if (mesAtual === 12) {
                mesAtual = 0;
                anoAtual++;

                anos.push(anoAtual);
            }
        }

        function criarGrafico(ctx, labels, data, label, backgroundColor, borderColor, logScale = false) {
            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: label,
                        data: data,
                        backgroundColor: backgroundColor,
                        borderColor: borderColor,
                        borderWidth: 1,
                        fill: false
                    }]
                },
                options: {
                    scales: {
                        x: {
                            beginAtZero: true
                        },
                        y: {
                            type: logScale ? 'logarithmic' : 'linear',
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatarEmReais(value);
                                }
                            }
                        }
                    },
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            labels: {
                                color: '#333'
                            }
                        }
                    }
                }
            });
        }

        const ctxGeral = document.getElementById('graficoGeral').getContext('2d');
        criarGrafico(ctxGeral, anos, ganhosDayTrade, 'Ganhos Day Trade', 'rgba(75, 192, 192, 0.2)', 'rgba(75, 192, 192, 1)');

        const ctxDayTrade = document.getElementById('graficoDayTrade').getContext('2d');
        criarGrafico(ctxDayTrade, anos, ganhosDayTrade, 'Ganhos Day Trade', 'rgba(54, 162, 235, 0.2)', 'rgba(54, 162, 235, 1)');

        const ctxInvestimentos = document.getElementById('graficoInvestimentos').getContext('2d');
        criarGrafico(ctxInvestimentos, anos, saldoCarteiraTotal, 'Saldo Carteira de Investimentos', 'rgba(255, 206, 86, 0.2)', 'rgba(255, 206, 86, 1)', true);

        function carregarNotas() {
            let notasTextarea = document.getElementById('notas');
            notasTextarea.value = `Notas e comentários importantes...`;
        }

        function salvarNotas() {
            let notasTextarea = document.getElementById('notas');
            let notas = notasTextarea.value;
            alert('Notas salvas com sucesso!');
        }
    </script>
</body>
</html>
